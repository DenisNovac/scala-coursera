# Пересмотр Супервизора в Akka Typed

Supervision - это надзор за акторами.

- Любой актор можно перезапустить при необходимости;
- Супервизор решает, как реагировать на фейл актора.

Проблемы нетипизированного супервизора:

- Фейленный актор остановлен пока ждёт реакции (Фейленный актор существует и копит сообщения в мейлбоксе);
- Фейл может идти через сеть (нужна сериализация);
- Фейл содержит в себе слишком много информации по умолчанию.

## Локальное принятие решений

Сфейленный актор принимает решение о перезапуске локально. Это связано с тем, что локальный супервизор декорирует свои акторы поведением с стратегией рестарта (поведение - это всего лишь функция, которую мы можем композировать).

Нобработанные эксепшены фейлят актор.

Супервизор может быть навешен на любое поведение:

```scala
ctx.spawnAnonymous(
  Behaviors.supervise(actor)
    .onFailure[ArithmeticException](SupervisorStrategy.restart)
)
```

Сам супервизор не получает этот эксепшен непосредственно. Но мы имеем его в коде, поэтому можем отправить его, например, сообщением.

Супервизор под капотом является просто декоратором вокруг переданной функции.